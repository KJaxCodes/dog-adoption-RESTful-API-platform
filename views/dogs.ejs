<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dogs</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <a href="/">Home</a>
    <a href="/registerDog">Register a Dog</a>
    <h1>Available Dogs</h1>
    <p>Filter by Adopted or Registered</p>

    <% if (dogs.length> 0) { %>
        <ul class="dogs">
            <% dogs.forEach(dog=> { %>
                <!-- <% console.log('Dog:', dog.name, 'registeredBy:' , dog.registeredBy.toString()); %>
                    <% console.log('Logged-in userId:', userId); %> -->
                <li class="dog">
                    <img src="/dog.png" alt="dog icon">
                    <h3>
                        <%= dog.name %>
                    </h3>
                    <p>Size: <%= dog.size %>
                    </p>
                    <p>Age: <%= dog.age %>
                    </p>
                    <p>Description: <%= dog.description %>
                    </p>

                    <% if (userId) { %>
                        <% if (dog.registeredBy.toString()===userId) { %>
                            <!-- Remove button for the user who registered the dog -->
                            <form action="/dogs/delete/<%= dog._id %>" method="POST">
                                <button class="action-btn remove-btn" type="submit">Remove</button>
                            </form>
                            <% } else if (!dog.adoptedBy) { %>
                                <!-- Adopt button for other registered users -->
                                <form action="/adopt/<%= dog._id %>" method="POST">
                                    <button class="action-btn adopt-btn" type="submit">Adopt</button>
                                </form>
                                <% } else { %>
                                    <!-- If dog is adopted -->
                                    <p><em>Already adopted</em></p>
                                    <% } %>
                                        <% } %>
                </li>
                <% }) %>
        </ul>
        <% } else { %>
            <p>No dogs available for adoption right now.</p>
            <% } %>
</body>

</html>